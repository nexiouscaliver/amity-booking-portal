<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Booking Calendar</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        
            body {
                background-color: aliceblue;
                margin: 0;
                font-family: Arial, sans-serif;
              }
              
              :root {
                --primary-color: #04172b;
                --secondary-color: #061b31;
                --white: #ffffff;
                --gray: #6c757d;
              }
              
              .navbar {
                background-color: var(--primary-color);
                display: flex;
                justify-content: space-evenly; /* maing the space evenly*/
                align-items: center;
                padding: 10px 20px;
                box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
              }
            
            .logo-container {
                display: flex;
                align-items: center;
            }
            
            .navbar .logo img {
                height: 50px;
                margin-right: 10px;
            }
            
            .navbar .name img {
                height: 40px;
            }
            
            .navbar .menu {
              display: flex;
              gap: 20px;
          }
          
          .navbar .menu a {
              color: var(--white);
              text-decoration: none;
              padding: 10px 15px;
              border-radius: 5px;
              transition: background-color 0.3s, box-shadow 0.3s;
              font-weight: bold;
          }
          
          .navbar .menu a:hover {
              background-color: var(--secondary-color);
              transform: scale(1.05);
              box-shadow: 0 0 0 2px aliceblue;
          }
            
              
              .navbar .icon {
                font-size: 20px;
                color: var(--white);
                padding: 10px;
                cursor: pointer;
                font-weight: bold;
                position: relative;
              }
            
            .calendar-container {
                background: #e0f7fa; /* Aquatic theme background */
                border-radius: 20px; /* Adjust the radius for a more curved appearance */
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                width: 70%; /* Adjust as needed */
                margin: 0 auto; /* Center horizontally */
                padding: 20px;
                position: relative;
                height: auto;
                margin: 20px auto; /* Center the container horizontally with margin auto */
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
            }
            
            .calendar-nav {
                display: flex;
                justify-content: space-between;
                align-items: center;
                padding: 10px 0;
                background: #23252D; /* Aquatic theme header */
                color: white; /* Office theme text color */
                border-top-left-radius: 20px; /* Ensure corners are rounded */
                border-top-right-radius: 20px;
            }
            
            .calendar-nav button {
                background: none;
                border: none;
                color: white; /* Office theme button color */
                font-size: 18px;
                cursor: pointer;
                padding: 5px 10px;
                transition: background-color 0.3s;
            }
            
            .calendar-nav button:hover {
                background-color: rgba(0, 0, 0, 0.1);
                border-radius: 4px;
            }
            
            .calendar-nav span {
                font-size: 18px;
                font-weight: bold;
            }
            
            .calendar-header {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                background: #23252D; /* Aquatic theme header */
                color: white; /* Office theme text color */
                text-align: center;
                padding: 10px 0;
                font-weight: bold;
                border-bottom-left-radius: 20px; /* Ensure corners are rounded */
                border-bottom-right-radius: 20px;
            }
            
            .calendar {
                display: grid;
                grid-template-columns: repeat(7, 1fr);
                gap: 1px;
                background: #e0f7fa; /* Aquatic theme body */
                border-bottom-left-radius: 20px; /* Ensure corners are rounded */
                border-bottom-right-radius: 20px;
            }
            
            .calendar .day {
                background: #b2dfdb; /* Aquatic theme day background */
                color: #004d40; /* Aquatic theme day text */
                padding: 10px;
                text-align: center;
                cursor: pointer;
                transition: background-color 0.3s;
            }
            
            .calendar .day:hover {
                background-color: #80cbc4; /* Aquatic theme hover effect */
            }
            
            .calendar .day.booked {
                background-color: lightcoral; /* Booked color */
                color: white;
            }
            
            .calendar .day.pending {
                background-color: #fff176; /* Pending color */
                color: black;
            }
            
            .calendar .day.not-booked {
                background-color: #68d391; /* Not booked color */
                color: black;
            }
            
            
            .day {
                width: 100%;
                padding: 10px;
                box-sizing: border-box;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                cursor: pointer;
                background-color: white; /* Office theme background */
                color: #333; /* Office theme text color */
                border-radius: 50%;  /* Changed to circle */
                transition: box-shadow 0.3s, transform 0.3s;
            }
            
            .day:hover {
                background-color: #e0e0e0; /* Darker shade on hover */
                box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
                transform: scale(1.05);  /* Slight zoom effect */
            }
            
            .day.hidden {
                visibility: hidden;
            }
            
            .event-info {
                font-size: 12px;
                margin-top: 4px;
                text-align: center;
            }
            
            @media (max-width: 640px) {
                .calendar-header,
                .calendar {
                    grid-template-columns: repeat(3, 1fr);
                }
            
                .day {
                    font-size: 14px;
                    padding: 5px;
                }
            }
            
            @media (max-width: 480px) {
                .calendar-header,
                .calendar {
                    grid-template-columns: repeat(2, 1fr);
                }
            
                .day {
                    font-size: 12px;
                    padding: 3px;
                }
            }
            
    
    
    
            .legend {
                display: flex;
                justify-content: space-around;
                padding: 10px;
                margin-top: 20px;
                background-color: #23252D;
                
                border-radius: 8px;
                width: 100%;
                color:white;
                
            }
        
            
            .legend-item {
                display: flex;
                align-items: center;
            }
            
            .legend-color {
                width: 20px;
                height: 20px;
                border-radius: 4px;
                margin-right: 8px;
            }
            
            .full-booked-legend {
                background-color: lightcoral;
            }
            
            .not-booked-legend {
                background-color: #68d391;
            }
            
            .first-half-booked-legend {
                background-color:  rgb(236, 236, 151);
            }
            
         
           
    
    
    
    
    
    
    
    
            
            
            /*slots*/
            .time-slot-popup {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: #04172b; /* Dark blue background */
                border: 1px solid #ccc;
                padding: 20px;
                border-radius: 10px;
                box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                z-index: 1000;
                color: white; 
                max-width: 90%; 
                max-height: 90%; 
              
            }
            
            
            
            
            .time-slot-content {
                margin-top: 10px;
            }
            
            .time-slot-chart {
                display: flex;
                align-items: center;
                justify-content: space-between; /* Adjust  */
                gap: 10px; /* Or use margin: 10px;*/
                overflow-x: auto; /* Enable horizontal scrolling */
                overflow-y: hidden; /* Disable vertical scrolling */
            }
            
            .time-slot-time,
            .time-slot-status {
                padding: 10px;
                border: 2px solid #ccc;
                text-align: center;
                flex: 1; /* Take up remaining space */
                transition: transform 0.3s ease-out; /* Smooth transition for size change */
            }
            
            .time-slot-time:hover,
            .time-slot-status:hover {
                transform: scale(1.1); /* Increase size on hover */
            }
             
    
            
            .status-data {
                position: absolute;
                top: -100%; /* Start from above the box */
                left: 0;
                width: auto;
                height: auto;
                background-color: transparent; /* Transparent initially */
                animation: slideInDown 0.5s forwards; /* Animation for sliding in */
                text-align: center;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                transition: transform 0.3s ease-out; /* Smooth transition for size change */
            }
            
            .status-data:hover {
                transform: scale(1.2); /* Increase size on hover */
            }
            
            @keyframes slideInDown {
                from {
                    top: -100%; /* Start from above the box */
                }
                to {
                    top: 0; /* Slide in downwards */
                }
            }
            
            
            
            .booked {
                background-color: lightcoral; /* Light red background for booked slots */
            }
            
            .pending {
                background-color: rgb(236, 236, 151); /* Light yellow background for pending slots */
                color: black;
            }
            
            .free {
                background-color: lightgreen; /* Green background for free slots */
            }
            
            .close-button {
                display: block;
                margin: 10px auto;
                padding: 5px 10px;
                background-color: #f44336; /* Red close button */
                color: white;
                border: none;
                border-radius: 5px;
                cursor: pointer;
            }
            
            .close-button:hover {
                background-color: #d32f2f; /* Darker red hover color */
            }
            
            .time-slot-popup.disappear {
                opacity: 0;
            }
            
          
            .nav-buttons {
                display: flex;
                justify-content: space-between;
                margin-top: 40px;
            }
            
            .nav-buttons button {
                background-color: transparent;
                border: none;
                cursor: pointer;
                transition: all 0.3s ease;
                font-weight: bold;
                color: white; /* Adjust text color as needed */
                font-size: 1.2em; /* Adjust font size as needed */
                padding: 5px 10px; /* Adjust padding as needed */
            }
            
            .nav-buttons button:hover {
                transform: scale(1.1);
                color: #555; /* Adjust hover text color */
            }
            
            .nav-buttons button:focus {
                outline: none;
            }
            
            .nav-buttons button:active {
                transform: scale(0.9);
            }
            
        </style>
</head>
<body>
    <header>
        <div class="navbar">
            <div class="logo-container">
                <div class="logo">
                    <img src="{{ url_for('static',filename='L1.png') }}" alt="Logo">
                </div>
                <div class="name">
                    <img src="{{ url_for('static',filename='L2.png')}}" alt="Name Logo">
                </div>
            </div>
            <div class="menu">
                <a href="{{url_for('userhome')}}" class="menu-item">
                    <i class="fas fa-calendar-alt"></i> Home
                </a>
                <a href="{{url_for('usernoti')}}" class="menu-item">
                    <i class="fas fa-bell"></i> Hall Updates
                </a>
                <a href="{{url_for('status')}}" class="menu-item">Booking Status</a>
                <a href="{{url_for('home')}}" class="menu-item">Logout</a>
            </div>
        </div>
    </header>
    <div class="calendar-container">
        <div class="calendar-nav">
            <button id="prevMonth">&lt;</button>
            <span id="monthYear"></span>
            <button id="nextMonth">&gt;</button>
        </div>
        <div class="flex justify-center mb-4">
            <select id="hallDropdown" class="mx-2 p-2 bg-gray-700 text-gray-400 rounded">
                <option value="Auditorium">Auditorium</option>
                <option value="SeminarHall">Seminar Hall</option>
                <option value="Room105">Room 105</option>
                <option value="AIITConferenceRoom">AIIT Conference Room</option>
                <option value="RICSConferenceRoom">RICS  Conference Room</option>
                <option value="Atrium">Atrium</option>
            </select>
            <select id="monthSelect" class="mx-2 p-2 bg-gray-700 text-gray-400 rounded readonly ">
                <!-- Options will be populated by JavaScript -->
            </select>
            <input type="date" id="dateSearch" class="p-2 bg-gray-700 text-gray-400 rounded">
        </div>
        <div class="calendar-header">
            <div>Sun</div>
            <div>Mon</div>
            <div>Tue</div>
            <div>Wed</div>
            <div>Thu</div>
            <div>Fri</div>
            <div>Sat</div>
        </div>
        <div id="calendar" class="calendar"></div>
        <div class="legend">
            <div class="legend-item">
                <div class="legend-color full-booked-legend"></div>
                <span>Fully Booked</span>
            </div>
            <div class="legend-item">
                <div class="legend-color not-booked-legend"></div>
                <span>Not Booked</span>
            </div>
            <div class="legend-item">
                <div class="legend-color first-half-booked-legend"></div>
                <span>First Half Booked</span>
            </div>
            <div class="legend-item">
                <div class="legend-color second-half-booked-legend"></div>
                <span>Second Half Booked</span>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const calendar = document.getElementById('calendar');
            const monthYearDisplay = document.getElementById('monthYear');
            const prevMonthButton = document.getElementById('prevMonth');
            const nextMonthButton = document.getElementById('nextMonth');
            const monthSelect = document.getElementById('monthSelect');
            const yearSelect = document.getElementById('yearSelect');
            const dateSearch = document.getElementById('dateSearch');
            const hallDropdown = document.getElementById('hallDropdown');
        
            let currentDate = new Date();
            let currentHall = 'Auditorium';
            let selectedDate = '';
        
            const hallData = {
                Auditorium: {
    //                 '2024-07-01': [
    //   { starttime: '9 am', endtime: '11 am', status: 'booked', school: 'Amity shool of enginering and science', event: 'Event A',eventcordinator: 'Eventtttttttttttttttttt' },
    //   { starttime: '12 pm', endtime: '1 pm', status: 'booked', school: 'School A', event: 'Event A',eventcordinator: 'Eventtttttttttttttttttttt' },
    //   { starttime: '2 pm', endtime: '4 pm', status: 'pending', school: 'School A', event: 'Event A',eventcordinator: 'Event ttttttttttttttttt' },
                 // Add more data here
    // ],           
                    {%for i in output[0]%}
                  '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-03': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School C', event: 'Event C' , eventcordinator: 'Event C'}],
                    // '2024-07-04': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School D', event: 'Event D' ,eventcordinator: 'Event C'}],
                    // '2024-07-07': [{ starttime: '9', endtime: '10', status: 'pending', school: 'School J', event: 'Event J' ,eventcordinator: 'Event C'}],
                },

                SeminarHall: {
                    {%for i in output[1]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-06-01': [{ starttime: '1 pm', endtime: '2 pm', status: 'booked', school: 'ABI', event: 'AS' , eventcordinator: 'AS'}],
                    // '2024-07-22': [{ starttime: '1 pm', endtime: '9 am', status: 'booked', school: 'hi', event: 'AS2' , eventcordinator: 'AS'}],
                    // '2024-07-26': [{ starttime: '1 pm', endtime: '9 am', status: 'booked', school: 'ABI', event: 'AS2' , eventcordinator: 'AS'}],
                    
                   
                },
                Room105: {
                    {%for i in output[2]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-06': [{ starttime: '9', endtime: '10', status: 'booked', school: 'School F', event: 'Event F',eventcordinator: 'Event C' }],
                    // '2024-07-07': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School G', event: 'Event G' ,eventcordinator: 'Event C'}],
                },
                CRCConferenceRoom: {
                    {%for i in output[3]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-08': [{ starttime: '9', endtime: '10', status: 'booked', school: 'School H', event: 'Event H',eventcordinator: 'Event C' }],
                    // '2024-07-09': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School I', event: 'Event I',eventcordinator: 'Event C' }],
                },
                AIITConferenceRoom: {
                    {%for i in output[4]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-08': [{ starttime: '9', endtime: '10', status: 'booked', school: 'School H', event: 'Event H',eventcordinator: 'Event C' }],
                    // '2024-07-09': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School I', event: 'Event I',eventcordinator: 'Event C' }],
                },
                RICSConferenceRoom: {
                    {%for i in output[5]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-08': [{ starttime: '9', endtime: '10', status: 'booked', school: 'School H', event: 'Event H',eventcordinator: 'Event C' }],
                    // '2024-07-09': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School I', event: 'Event I',eventcordinator: 'Event C' }],
                },
                Atrium: {
                    {%for i in output[6]%}
                    '{{i[0]}}' : [{ starttime: '{{(i[4])}}', endtime: '{{(i[1])}}', status: 'booked', school: '{{i[2]}}', event: '{{i[6]}}' , eventcordinator: '{{i[5]}}'}],
                    {%endfor%}
                    // '2024-07-08': [{ starttime: '9', endtime: '10', status: 'booked', school: 'School H', event: 'Event H',eventcordinator: 'Event C' }],
                    // '2024-07-09': [{ starttime: '9', endtime: '12', status: 'booked', school: 'School I', event: 'Event I',eventcordinator: 'Event C' }],
                }
            };
        
            const timeSlots = [
            '9 am - 10 am', '10 am - 11 am', '11 am - 12 pm', '12 pm - 1 pm',
            '1 pm - 2 pm', '2 pm - 3 pm', '3 pm - 4 pm', '4 pm - 5 pm', '5 pm - 6 pm'
        ];
        
        const convertToTimeSlots = (startTime, endTime) => {
            const convertTo24Hour = (time) => {
                const [hour, modifier] = time.split(' ');
                let hourInt = parseInt(hour);
                if (modifier === 'pm' && hourInt !== 12) {
                    hourInt += 12;
                } else if (modifier === 'am' && hourInt === 12) {
                    hourInt = 0;
                }
                return hourInt;
            };
        
            const startHour = convertTo24Hour(startTime);
            const endHour = convertTo24Hour(endTime);
        
            let slots = [];
            for (let hour = startHour; hour < endHour; hour++) {
                let startHour12 = hour % 12 === 0 ? 12 : hour % 12;
                let endHour12 = (hour + 1) % 12 === 0 ? 12 : (hour + 1) % 12;
                let startModifier = hour < 12 || hour === 24 ? 'am' : 'pm';
                let endModifier = hour + 1 < 12 || hour + 1 === 24 ? 'am' : 'pm';
                
                let slot = `${startHour12} ${startModifier} - ${endHour12} ${endModifier}`;
                slots.push(slot);
            }
        
            return slots;
        };
        

        
            // Inside the updateCalendar() function

const updateCalendar = () => {
    calendar.innerHTML = '';
    const year = currentDate.getFullYear();
    const month = currentDate.getMonth();
    const firstDay = new Date(year, month, 1).getDay();
    const daysInMonth = new Date(year, month + 1, 0).getDate();

    monthYearDisplay.textContent = `${currentDate.toLocaleString('default', { month: 'long' })} ${year}`;

    // Fill initial empty slots
    for (let i = 0; i < firstDay; i++) {
        const emptyDay = document.createElement('div');
        emptyDay.classList.add('day', 'hidden');
        calendar.appendChild(emptyDay);
    }

    // Fill days of the month
    for (let day = 1; day <= daysInMonth; day++) {
        const dateKey = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const dayElement = document.createElement('div');
        dayElement.classList.add('day');
        dayElement.textContent = day;

        const bookings = hallData[currentHall][dateKey];
        if (bookings) {
            let bookedSlots = 0;
            let remainingSlots = [...timeSlots];

            bookings.forEach(booking => {
                const slots = convertToTimeSlots(booking.starttime, booking.endtime);
                slots.forEach(slot => {
                    bookedSlots++;
                    remainingSlots = remainingSlots.filter(s => s !== slot);
                });
            });

            dayElement.style.backgroundImage = `linear-gradient(to top, lightcoral ${bookedSlots * 10}%, transparent ${bookedSlots * 10}%)`;


            // Show remaining slots on hover
            dayElement.title = `Free slots: ${remainingSlots.join(', ')}`;
        } else {
            dayElement.classList.add('not-booked');
        }

        dayElement.addEventListener('click', () => showTimeSlotPopup(dateKey));
        calendar.appendChild(dayElement);
    }
};




const showTimeSlotPopup = (dateKey) => {
    // Remove existing popup if any
    closePopup();

    const popup = document.createElement('div');
    popup.classList.add('time-slot-popup');

    const title = document.createElement('h3');
    title.textContent = `Booking Status for ${dateKey}`;
    popup.appendChild(title);

    const closeButton = document.createElement('button');
    closeButton.classList.add('close-button');
    closeButton.innerHTML = '<i class="fas fa-times"></i>';
    closeButton.addEventListener('click', () => {
        closePopup();
    });
    popup.appendChild(closeButton);

    const timeSlotContent = document.createElement('div');
    timeSlotContent.classList.add('time-slot-content');
    popup.appendChild(timeSlotContent);

    const chart = document.createElement('div');
    chart.classList.add('time-slot-chart');
    timeSlotContent.appendChild(chart);

    timeSlots.forEach((timeSlot) => {
        const slotElement = createTimeSlotElement(timeSlot, dateKey);
        chart.appendChild(slotElement);
    });

    const navButtons = document.createElement('div');
    navButtons.classList.add('nav-buttons');

    const prevButton = document.createElement('button');
prevButton.classList.add('nav-button', 'prev-button'); // Added 'nav-button' class for styling
prevButton.innerHTML = '<i class="fas fa-chevron-left"></i>';
prevButton.addEventListener('click', () => {
    const prevDateKey = getPreviousDateKey(dateKey);
    showTimeSlotPopup(prevDateKey);
});
navButtons.appendChild(prevButton);

const nextButton = document.createElement('button');
nextButton.classList.add('nav-button', 'next-button'); // Added 'nav-button' class for styling
nextButton.innerHTML = '<i class="fas fa-chevron-right"></i>';
nextButton.addEventListener('click', () => {
    const nextDateKey = getNextDateKey(dateKey);
    showTimeSlotPopup(nextDateKey);
});
navButtons.appendChild(nextButton);

    popup.appendChild(navButtons);

    document.body.appendChild(popup);

    popup.addEventListener('click', (event) => {
        if (event.target === popup) {
            closePopup();
        }
    });
};

// Function to close the current popup and all popups
const closePopup = () => {
    const existingPopups = document.querySelectorAll('.time-slot-popup');
    existingPopups.forEach(popup => {
        popup.classList.add('disappear');
        setTimeout(() => popup.remove(), 300); // Delay for animation to complete
    });
};

// Function to get the previous date key
const getPreviousDateKey = (currentDateKey) => {
    const currentDate = new Date(currentDateKey);
    currentDate.setDate(currentDate.getDate() - 1);
    return currentDate.toISOString().split('T')[0];
};

// Function to get the next date key
const getNextDateKey = (currentDateKey) => {
    const currentDate = new Date(currentDateKey);
    currentDate.setDate(currentDate.getDate() + 1);
    return currentDate.toISOString().split('T')[0];
};






const createTimeSlotElement = (timeSlot, dateKey) => {
    const slotElement = document.createElement('div');
    slotElement.classList.add('time-slot-row');

    const timeElement = document.createElement('div');
    timeElement.classList.add('time-slot-time');
    timeElement.textContent = timeSlot;
    slotElement.appendChild(timeElement);

    const statusElement = document.createElement('div');
    statusElement.classList.add('time-slot-status');

    const bookings = hallData[currentHall][dateKey];
    let isBooked = false;
    let bookingData = [];

    if (bookings) {
        bookings.forEach((booking) => {
            const slots = convertToTimeSlots(booking.starttime, booking.endtime);
            if (slots.includes(timeSlot)) {
                isBooked = true;
                const currentBookingData = `SCHOOL - ${booking.school}\nEVENT - ${booking.event}\nCOORDINATOR - ${booking.eventcordinator}`;

                if (!bookingData.includes(currentBookingData)) {
                    bookingData.push(currentBookingData);
                }
            }
        });
    }

    if (isBooked) {
        if (bookingData.length === 1) {
            statusElement.textContent = bookingData[0];
            if (bookings[0].status === 'booked') {
                statusElement.classList.add('booked');
            } else if (bookings[0].status === 'pending') {
                statusElement.classList.add('pending');
            }
        } else {
            statusElement.textContent = `${bookingData.length} bookings`;
            statusElement.classList.add('booked'); // Assume all bookings are of the same status
        }
    } else {
        statusElement.textContent = 'Free Slot';
        statusElement.classList.add('free');
    }

    slotElement.appendChild(statusElement);

    return slotElement;
};













            const populateMonthSelect = () => {
                const months = [
                    'January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'
                ];
                months.forEach((month, index) => {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = month;
                    monthSelect.appendChild(option);
                });
                monthSelect.value = currentDate.getMonth();
            };
        
            monthSelect.addEventListener('change', () => {
                currentDate.setMonth(monthSelect.value);
                updateCalendar();
            });
        
            const handleHallChange = () => {
                currentHall = hallDropdown.value;
                updateCalendar();
            };
        
            hallDropdown.addEventListener('change', handleHallChange);
        
            dateSearch.addEventListener('change', () => {
                selectedDate = new Date(dateSearch.value);
                if (!isNaN(selectedDate)) {
                    currentDate = selectedDate;
                    monthSelect.value = currentDate.getMonth();
                    updateCalendar();
                }    
            } ) ;
        
            prevMonthButton.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() - 1);
                monthSelect.value = currentDate.getMonth();
                updateCalendar();
            });
        
            nextMonthButton.addEventListener('click', () => {
                currentDate.setMonth(currentDate.getMonth() + 1);
                monthSelect.value = currentDate.getMonth();
                updateCalendar();
            });
        
            populateMonthSelect();
            updateCalendar();
        });
    </script>
</body>
</html>
